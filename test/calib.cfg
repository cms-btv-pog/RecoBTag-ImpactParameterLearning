#! /bin/env cmsRun

process analyzer = {

    # input file
  source = PoolSource {
     untracked vstring fileNames = { 
     '/store/relval/2008/3/31/RelVal-RelValCJets_Pt_50_120-1206883114-HLT/0000/00D15D8E-32FF-DC11-8572-001617C3B6C6.root',
'/store/relval/2008/3/31/RelVal-RelValCJets_Pt_50_120-1206883114-HLT/0000/22C9DC90-32FF-DC11-BC06-001617C3B69C.root',
'/store/relval/2008/3/31/RelVal-RelValCJets_Pt_50_120-1206883114-HLT/0000/3466C5C6-32FF-DC11-81DF-000423DD2F34.root',
'/store/relval/2008/3/31/RelVal-RelValCJets_Pt_50_120-1206883114-HLT/0000/A8290DC0-32FF-DC11-96E9-000423D94700.root',
'/store/relval/2008/3/31/RelVal-RelValCJets_Pt_50_120-1206883114-HLT/0000/BAD1EC2B-32FF-DC11-A9AC-001617DBD230.root',
'/store/relval/2008/3/31/RelVal-RelValCJets_Pt_50_120-1206883114-HLT/0000/C89775F3-35FF-DC11-A231-000423D9853C.root',
'/store/relval/2008/3/31/RelVal-RelValCJets_Pt_50_120-1206883114-HLT/0000/D4673AC4-32FF-DC11-ACE3-000423D6B5C4.root',
'/store/relval/2008/3/31/RelVal-RelValCJets_Pt_50_120-1206883114-HLT/0000/E0683651-33FF-DC11-8BAA-001617DBD230.root',
'/store/relval/2008/3/31/RelVal-RelValCJets_Pt_50_120-1206883114-HLT/0000/F2CBDD4D-33FF-DC11-BB74-001617C3B778.root'

}
}

 #   source = EmptySource {untracked uint32 firstRun=1 }

untracked PSet maxEvents = {untracked int32 input = 100}

    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
#    replace MessageLogger.cout.threshold = "INFO"

    # Test tracks to jets association
    module ipCalib = ImpactParameterCalibration {
     bool resetHistograms = true
     bool writeToDB = true
     bool writeToRootXML = false
     bool writeToBinary = false
     InputTag tagInfoSrc = impactParameterTagInfos   
     InputTag primaryVertexSrc = offlinePrimaryVerticesFromCTFTracks
     string inputCategories  = "HardCoded"
     int32 nBins = 10000
     double maxSignificance  = 50.

    }

#include "CondCore/DBCommon/data/CondDBCommon.cfi"
#replace CondDBCommon.connect = "sqlite_file:btagnew.db"
#replace CondDBCommon.catalog = "file:mycatalog.xml"
#        es_source = PoolDBESSource {
#                                  using CondDBCommon
#                                 VPSet toGet = {
#                                   {string record = "BTagTrackProbability2DRcd"
#                                     string tag = "probBTagPDF2D_tag"    },
#                                   {string record = "BTagTrackProbability3DRcd"
#                                     string tag = "probBTagPDF3D_tag"    }
#                                    }
#                                   }


      service = PoolDBOutputService
      {
         string connect = "sqlite_file:btagnew_new.db"    
           untracked string timetype = "runnumber"    
           untracked uint32 authenticationMethod = 1
           untracked string catalog = "file:mycatalog_new.xml"
           untracked bool loadBlobStreamer = true
         VPSet toPut=
           {
             {
              string record = "BTagTrackProbability2DRcd"
              string tag ="probBTagPDF2D_tag"
             },
             {
              string record = "BTagTrackProbability3DRcd"
              string tag ="probBTagPDF3D_tag"
             }
           }
       PSet DBParameters = {
           untracked string authenticationPath="."
           untracked int32 messageLevel=0
       }
     }

    # module execution
    path p = { ipCalib }

}
